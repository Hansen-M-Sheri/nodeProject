<!DOCTYPE html>
<html>
<head>
	<title>Add Scriptures</title>
	<meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
  <style>
  	body {text-align: center;}
  	h1 {padding: 20px;}
  	h4  {padding: 20px;}
</style>
</head>
<body>
	<header>
		<nav class="navBar navbar-expand-sm bg-dark navbar-dark" >
			<ul class="navbar-nav">
				<li class="active"><a href="scriptureOfDay.html">Home</a></li>
				<li><a href="addTopic.html">Topic</a></li>
	      		<li><a href="addScripture.html">Scriptures</a></li>
	      		<li><a href="notification.html">Notifications</a></li>
				
			</ul>
		</nav>
	</header>
	 <!-- Jumbotron -->
    <div class="jumbotron bg-info" id="banner">
      <h1>Add Topic</h1>      
  	</div>
  	<div class="containerTopic">
		<form class="form-group col-md-4 " method="get">
			<!-- <center><h2>Add Scripture</h2></center><br> -->
			<input type="text" id="topic" placeholder="topic" name="topic" class="form-control" required><br>
			<input type="textArea"  id="description" placeholder="description" name="description" class="form-control" required><br>
			
			<input type="submit" id="addTopicSubmit" value="Add Topic" name="addTopic" class="btn btn-primary btn-block">
			<div id="statusTopic"></div>
		</form>	
		
	</div>
  	
  	

	<script>
		window.addEventListener('load', getTopics);
		document.getElementById('addTopicSubmit').addEventListener('click', addTopic);


		function addTopic(){
			// event.preventDefault();
			console.log("Enter addTopic");
			var topic = $("#topic").val();
			var description = $("#description").val();
			var params = {
				topic: topic,
				description: description
			}
					console.log(params);
		$.post("/addTopic", params, function(result) {
			console.log("result: "+ result);
			if (result && result.success) {
				$("#statusTopic").text("Topic Added");
				// window.location.href = "scriptureOfDay.html";
			} else {
				$("#statusTopic").text("Error adding topic.");
			}
		});

		}

		
		
		
		function getTopics(){
			console.log("Enter Notification: getTopics");
			//check for session
					$.ajax({
			type: "GET",
			url: "/topics",
			success: function(result){
				console.log("result: "+ result);
				var topics = JSON.parse(result);
				// console.log("topics: "+topics[0] + " " + topics[1]);
				displayDropDownTopics(topics);
				console.log("Exit Notification: getTopics");
			}

		})
		}

		function getTopicID(name){
			console.log("Enter Notification:getTopicID");
			//check for session
			console.log("getTopicID");

			$.ajax({
				type: "GET",
				url: "/getTopicIDByName?name="+name,
				success: function(result){
					var id = JSON.parse(result);
					getScriptureCountByTopic(result);
					} 
				})
			console.log("Exit Notification:getTopicID");
		
			
		}
		//display buttons that are options to select for sending text
		function displayDropDownTopics(topics){
			console.log("Enter Notification:displayDropDownTopics");
			
			var select = document.getElementById('select');
			console.log("Topics: " + topics);
			
			for(var i = 0; i < topics.length; i++){	
				var id = topics[i].id;	
				var option = document.createElement('option');
				option.className="btn btn-primary";
				option.id = id; 
				option.text = topics[i].name;
				// button.innerHTML = topics[i].name;
				select.appendChild(option);
				console.log(id);

				console.log("Exit Notification:displayDropDownTopics");
			}
		}
	</script>
</body>
</html>